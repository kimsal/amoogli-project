{% include 'admin/header.html' %} 
<style type="text/css">
  .other_image{
    height:50px;
    background-color:#79aec8;
    color:white;
    font-weight:bold;
    line-height:50px;
  }
  .more{
    color:#447e9b;
    font-weight: bold;
    cursor: pointer;
    margin-top:10px;
  }
  .more:hover{
    color:#036;
  }
  .delete{
    color:red;
    cursor: pointer;
    padding-left:10px;
    font-weight: bold;
    text-align: right;
  }
  .delete:hover{
    color:#E88;

  }
  .btnsub {
    margin-left: 3px;
  }
  tr td img{
    margin-top:10px;
  }
  input[type="file"] {
    display: block;
    margin-right: 5px;
  }
  .upload-file {
    padding: 0px;
  }
</style>
<script type="text/javascript">
  var img_no=0;
</script>
<div id="main" role="main">
<!-- RIBBON -->
  <div id="ribbon">

    <span class="ribbon-button-alignment"> <span id="refresh" class="btn btn-ribbon" data-action="resetWidgets" data-title="refresh"  rel="tooltip" data-placement="bottom" data-original-title="<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings." data-html="true"> <i class="fa fa-refresh"></i> </span> </span>
  </div>
  <article class="col-sm-12 col-md-12 col-lg-12">
    <a href="/admin/post/add" class="btn btn-default pull-right btn-add" >
      <span class="fa fa-plus-circle" aria-hidden="true"></span>
      New
    </a>
    <!-- col -->
    <div>
      <h1 class="page-title txt-color-blueDark"><!-- PAGE HEADER --><i class="fa-fw fa fa-home"></i> Post</h1>
    </div>
    <!-- end col -->
    <!-- right side of the page with the sparkline graphs -->
    <!-- col -->
    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
      <!-- sparks -->
      <!-- end sparks -->
    </div>
    <!-- end col -->
  </article>
  <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12">
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                {% for message in messages %}
                  <div class="alert"> 
                    {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}
          </div>
        </div>
<!-- END RIBBON -->
  <form class="form-horizontal" action="/admin/post/add/" method="POST" id="frm" enctype="multipart/form-data">
  <input type="text" name="description" id="description"/>
   <input type="text" name="txt_temp_image" class="txt_temp_image" value="" style="display:none"/>
    <!-- input title-->
    <article class="col-sm-12 col-md-12 col-lg-12">
      <div class="form-group">
        
        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
          <input class="form-control" id="title" name="title" type="text" value="" placeholder="Title">
        </div>
        <div class="hidden-xs col-sm-3 col-md-3 col-lg-3">
            <div class="col-sm-12 col-lg-12 col-md-12">
              <div class="btn-group pull-right btnsub">         
                <button class="btn btn-sm btn-primary" type="reset">
                  <i class="fa fa-times"></i> Cancel
                </button>          
              </div>
              <div class="btn-group pull-right btnsub">   
                <button class="btn btn-sm btn-success" type="submit">
                  <i class="fa fa-check"></i> Save
                </button>    
              </div>
            </div>
        </div>
      </div>
      <div class="form-group">
       
          <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
            <textarea class="form-control" id="short_description" name="short_description" type="text" value="" placeholder="Short Description" rows='4'></textarea>
          </div>
      </div>
    </article>
    <article class="col-sm-9 col-md-9 col-lg-9">
      <!-- Widget ID (each widget will need unique ID)-->
      <div class="jarviswidget jarviswidget-color-blue" id="wid-id-0" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-togglebutton="false" data-widget-fullscreenbutton="false" data-widget-sortable="false">
        <header>
          <span class="widget-icon"> <i class="fa fa-pencil"></i> </span>
          <h2>Description</h2>
        </header>
        <!-- widget div-->
        <div>
          <!-- widget edit box -->
          <div class="jarviswidget-editbox">
            <!-- This area used as dropdown edit box -->
          </div>
          <!-- end widget edit box -->
          <!-- widget content -->
          <div class="widget-body no-padding">
            <div class="summernote">     
            </div>      

          </div>
          <!-- end widget content -->
        </div>
        <!-- end widget div -->
      </div>
      <!-- end widget -->
    </article>
<!-- WIDGET END -->
    <article class="col-sm-9 col-md-9 col-lg-9">
      <div class="form-group">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <select class="form-control" id="category_id" name="category_id"><option value="1">ACTIVITIES</option><option value="5">Smallworld</option><option value="6">Tour</option><option value="7">Tour2</option></select>
          </div>
      </div>
    </article>
     <article class="col-sm-9 col-md-9 col-lg-9">
      <div class="form-group">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <input class="form-control price" placeholder="Price ..." id="price" name="price" type="text" value="">
          </div>
      </div>
    </article>
    <article class="col-sm-9 col-md-9 col-lg-9">
      <div class="form-group">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <textarea class="form-control" id="map" placeholder="Map ..." name="map" rows="2"></textarea>
          </div>
      </div>
    </article>
    <article class="col-sm-8 col-md-8 col-lg-8">
      <div class="col-md-12 col-xs-12 co-md-12 col-lg-12 other_image">
        More Images (optional)
      </div>
    </article>
    <article class="col-sm-8 col-md-8 col-lg-8">
      <div  class="upload-file col-xs-12 col-sm-6 col-md-6 ol-lg-6">
        <table id="imgs">
          <tr>
            <td>
              <input class="btn btn-default" type="file" name="other_image[]" multiple=""  class="other_image1"/>
            </td>
            <td>
            <img src="/static/images/no image.jpg" class="img-1 img-responsive" style="max-width:100px;">
            </td>
            <td>
            <input type="text" value="" name="image1" style="display:none;" />
            </td>
            <td class="delete delete1" onclick="removeImage(1)">
              <span class="btn btn-sm btn-success">
                 <input type="checkbox"  name="remove1" id="rm1"/>
                Remove
              </span>
            </td>
          </tr>
          </table>
          <div class="more">
            <i class="fa fa-plus" aria-hidden="true" style="color:blue"></i>
            <label>
                  Add another image
            </label>
          </div>
          </div>
        </div>
      <!--end feature image-->
  </form>
</div>

<!-- PAGE RELATED PLUGIN(S) EDITOR -->
<script src="/static/admin/js/plugin/summernote/summernote.min.js"></script>
<script src="/static/admin/js/plugin/markdown/markdown.min.js"></script>
<script src="/static/admin/js/plugin/markdown/to-markdown.min.js"></script>
<script src="/static/admin/js/plugin/markdown/bootstrap-markdown.min.js"></script>
<script>
  if (!window.jQuery.ui) {
    document.write('<script src="/static/admin/js/libs/jquery-ui-1.10.3.min.js"><\/script>');
  }
</script>
<script type="text/javascript" src="/static/admin/js/addMoreImage.js"></script>
<div class="col-sm-12" style="height:100px;"></div>
<script type="text/javascript" src="/static/admin/js/postform.js"></script>
  {% for p in post %}
  <script type="text/javascript">
   $('input#title').attr('value',"{{p.title|safe}}"); 
   $('#frm').attr('action','/admin/post/edit/{{p.slug}}/');
   $('#description').html("{{p.description.replace('\n', '').replace('\r','')}}");  
   $('select#category_id option[value="{{p.category_id}}"]').attr("selected","selected");
   feature_image="{{p.feature_image}}";

   $("#landscape").html('<img src="'+feature_image+'" class="img-responsive"/>');
   $(".txt_temp_image").attr('value',feature_image);
   $("#duration").attr('value',"{{p.duration}}");
   $("#price").attr('value',"{{p.price}}");
   $("#location").attr('value',"{{p.location}}");
   $("#file").attr('value',"{{p.file}}");
   $("#landscape img").addClass("img-responsive");
   //Load other images:
   loadOldImages("{{p.images}}");
   $("#short_description").html("{{p.short_description}}");
   $("#price").attr('value',"{{p.price}}");
   $("#map").html("{{p.map}}");
 </script>
{% endfor %}
<script type="text/javascript">
  // if(feature_image==''){
  //   feature_image='/static/images/no image.jpg';
  //  }
  //  $("#landscape").html('<img src="'+feature_image+'" style="width:200px;height:150px" class="img-responsive"/> ');
  // //input only number
  //   $("#price").keydown(function (e) {
  //       // Allow: backspace, delete, tab, escape, enter and .
  //       if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
  //            // Allow: Ctrl+A, Command+A
  //           (e.keyCode == 65 && ( e.ctrlKey === true || e.metaKey === true ) ) || 
  //            // Allow: home, end, left, right, down, up
  //           (e.keyCode >= 35 && e.keyCode <= 40)) {
  //                // let it happen, don't do anything
  //                return;
  //       }
  //       // Ensure that it is a number and stop the keypress
  //       if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
  //           e.preventDefault();
  //       }
  //   });
  // //Other images
</script>
{% include 'admin/footer.html' %} 